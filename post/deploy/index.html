<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

        <link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono" rel="stylesheet">

        <title>HUGO 安装指南</title>

        <link rel="stylesheet" href="/css/stylesheet.css">

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
        </script>
        <script type="text/javascript" src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.js"></script>
    </head>
    <body>
      <div class="container-fluid">
        <nav class="navbar navbar-expand-md navbar-light">

          
          <span class="navbar-brand mb-0 h1"></span>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle Navigation" name="button">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-item nav-link " href="/">Home</a>
              
              
              <a class="nav-item nav-link " href="/about/">About</a>
            </div>
          </div>
        </nav>

        <section id="page-title">
          <h1><a href="/">Felix Mon Homepage</a></h1>
          <span id="author-name">
            <h6><a href="/about/"></a></h6>
          </span>
        </section>


<div class="blog-post">
  <h1>HUGO 安装指南</h1>
  <div class="blog-post-subheader">
    <time>24 Sep 2018</time>
  </div>
  <div class="blog-post-content">
    

<h2 id="github-pages">Github Pages</h2>

<p>登录 github 创建 username.github.io 的 repository</p>

<h2 id="下载-hugo-安装文件-mac">下载 hugo 安装文件（MAC)</h2>

<pre><code>brew install hugo
</code></pre>

<h2 id="创建一个新网站">创建一个新网站</h2>

<pre><code>hugo new site &lt;sitename&gt;
</code></pre>

<h2 id="下载一个新主题">下载一个新主题</h2>

<pre><code>git clone https://github.com/EmielH/tale-hugo.git themes/tale
</code></pre>

<h2 id="下载-repository">下载 repository</h2>

<pre><code>git clone https://username.github.io/username.githug.io
</code></pre>

<h2 id="创立-submodule">创立 submodule</h2>

<pre><code>git submodule add -f -b master git@github.com:username/username.github.io.git public
</code></pre>

<h2 id="开始一篇新文章">开始一篇新文章</h2>

<pre><code>hugo new post/hello-world.md
</code></pre>

<h2 id="告诉-hugo-应用哪个主题">告诉 hugo 应用哪个主题</h2>

<p>设置根目录下 config.toml 的 theme 值</p>

<pre><code>theme = &quot;tale&quot;
</code></pre>

<h2 id="尝试运行">尝试运行</h2>

<pre><code>hugo server -D
</code></pre>

<h2 id="自动运行">自动运行</h2>

<p>创造一个 shell script 以使得 hugo 实现自动化部署，步骤最后一步可能会需要输入ssh key 密码。</p>

<pre><code class="language-shell">#!/bin/bash

echo -e &quot;\033[0;32mDeploying updates to GitHub...\033[0m&quot;

# Build the project.
hugo -D

# Go To Public folder
cd public
# Add changes to git.
git add .

# Commit changes.
msg=&quot;rebuilding site `date`&quot;
if [ $# -eq 1 ]
  then msg=&quot;$1&quot;
fi
git commit -m &quot;$msg&quot;

# Push source and build repos.
git push origin master
</code></pre>

<p>保存上述 shell scripts 为 deploy.sh 后 chmod +x 使其可执行，以后每次改动或者新增文章，只要 ./deploy.sh 就可以了。</p>

<p>仍需解决的问题：</p>

<ol>
<li><p>hugo 并不提供删除文章的命令，因为直接在文件夹 content 删除即可，但这样会使得 public 文件夹里的文章不会随着 content 文章的删除而删除，如此一来， git push 的时候，所删除的文章也不会反映到 github 上；</p></li>

<li><p>如果文章中的 markdown 语法或者其它 hugo 语法错误，那么 hugo -D 的执行结果就会出现错误，，进而导致后续的一系列问题；</p></li>

<li><p>每次执行 deploy.sh 都需要输入 ssh key 密码</p></li>
</ol>

<hr />

<h2 id="识别数学公式">识别数学公式</h2>

<p>Hugo 采用 <a href="https://docs.mathjax.org/en/latest/start.html">MathJax</a> 来展现数学公式，最便捷的使用方式是在</p>

<p><code>themes/themesname/layouts/partials/header.html</code></p>

<p>中加入</p>

<pre><code class="language-javascript">&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;
&lt;/script&gt;
</code></pre>

<p>这是一个部署在 CloudFlare 上的基于 CDN 的 javascript, 当然也可以部署 MathJax 在本地，另外，为了更准确的识别行文中的数学公式，建议再加入</p>

<pre><code class="language-javascript">&lt;script type=&quot;text/x-mathjax-config&quot;&gt;
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
&lt;/script&gt;
</code></pre>

<p>测试结果如下：</p>

<p>When $a \ne 0$, there are two solutions to $(ax^2 + bx + c = 0)$ and they are
$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}$$</p>

<hr />

<h2 id="安装-mermaid">安装 mermaid</h2>

<p><a href="https://mermaidjs.github.io/">mermaid</a> 用于画流程图以及甘特图, 主题 <a href="https://github.com/vjeantet/hugo-theme-docdock">docdock</a> 可以自动安装 mermaid, 接下来是在其它主题部署 mermaid 的步骤：</p>

<ul>
<li>安装 docdock 主题</li>
</ul>

<pre><code>git submodule add https://github.com/vjeantet/hugo-theme-docdock.git themes/docdock
</code></pre>

<ul>
<li>复制 shortcode</li>
</ul>

<pre><code>cp themes/docdock/layouts/shortcodes/mermaid.html themes/yourtheme/layouts/shortcodes/
</code></pre>

<ul>
<li>复制 mermaid js 以及 css</li>
</ul>

<pre><code>cp -r themes/docdock/static/mermaid themes/yourtheme/static/
</code></pre>

<p>测试结果如下：</p>

<link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script defer src="/mermaid/mermaid.js">mermaid.initialize({startOnLoad:true});</script>
<div class="mermaid" align="left" >
graph LR;
    A[Hard edge] -->|Link text| B(Round edge)
    B --> C{Decision}
    C -->|One| D[Result one]
    C -->|Two| E[Result two]
</div>

<link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script defer src="/mermaid/mermaid.js">mermaid.initialize({startOnLoad:true});</script>
<div class="mermaid" align="left" >
graph TD
  A-->B;
  A-->C;
  B-->D;
  C-->D;
</div>

<p>未完待续……</p>

  </div>
</div>

      <footer>
        <hr>
        <small>
          &copy; 2018 .
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> using the <a href="https://github.com/arjunkrishnababu96/basics" target="_blank">Basics</a> theme.
        </small>
      </footer>
    </div> 

    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  </body>
</html>

